<!DOCTYPE html>
	<html lang="fr">
	<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Carte interactive ‚Äì Au revoir √©toil√©</title>
	<style>
    .ecran-galactique {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }

    .fond-galactique {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .message-carte {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      text-align: center;
      background: transparent;
      border: none;
      padding: 20px 30px;
      font-size: clamp(1em, 2vw, 1.4em);
      line-height: 1.6em;
      max-width: 90%;
      opacity: 0;
      filter: blur(6px);
      animation: apparitionBrumeuse 4s ease-out forwards;
    }

    .message-final {
      position: absolute;
      top: 30px;
      right: 30px;
      max-width: 400px;
      background: transparent;
      color: #fff;
      padding: 20px;
      border-radius: 12px;
      text-align: right;
    }

    @keyframes apparitionBrumeuse {
      0% {
        opacity: 0;
        filter: blur(14px);
        transform: translate(-50%, -55%);
      }
      50% {
        opacity: 0.5;
        filter: blur(6px);
      }
      100% {
        opacity: 1;
        filter: blur(0);
        transform: translate(-50%, -50%);
      }
    }

    @keyframes fadeOutBrume {
      0% {
        opacity: 1;
        filter: blur(0);
      }
      100% {
        opacity: 0;
        filter: blur(6px);
      }
    }

    .message-final.disparaitre {
      animation: fadeOutBrume 2.5s ease forwards;
    }

    .message-carte.disparaitre {
      animation: fadeOutBrume 2.5s ease forwards;
    }

    @media screen and (max-width: 600px) {
      .message-final {
        font-size: 0.9em;
        padding: 16px 20px;
        max-width: 90%;
        top: 20px;
        right: 10px;
      }

      .message-final h1 {
        font-size: 1.2em;
      }

      .message-final p {
        font-size: 1em;
        line-height: 1.4em;
      }
    }

    @media screen and (orientation: portrait) {
      .message-final {
        font-size: 1em;
      }
    }

    @media screen and (orientation: landscape) {
      .message-final {
        font-size: 0.9em;
      }
    }
	</style>
	</head>
	<body>
	<div class="ecran-galactique">
		<img src="monde-imaginaire.jpg" alt="Paysage abstrait et d√©sertique" class="fond-galactique" />
		<div id="lieu" class="message-carte">
		<h1>üåÑ</h1>
		<!--<p>
        "Vous avez foul√© un monde tiss√©<br />
        de reflets et de songes.<br />
        Que votre chemin s‚Äô√©panouisse encore<br />
        l√† o√π l‚Äôimaginaire dessine la r√©alit√©.<br />
        √Ä bient√¥t."
		</p>-->
		</div>
	</div>

  <section id="adieu" class="message-final">
    <h1>üåå Merci pour ce voyage</h1>
    <!--<p>
      ‚Äú√Ä pr√©sent, la carte se replie sur elle-m√™me...<br />
      Mais les √©clats que vous avez sem√©s dans chaque salle<br />
      continueront √† briller au-del√† de l‚Äôimage.<br />
      Revenez quand vous voulez. Le monde vous attend.‚Äù
    </p>-->
  </section>

  <script>
    // Disparition du message final
    setTimeout(() => {
      document.querySelector(".message-final").classList.add("disparaitre");
    }, 8000);
  </script>
  <script>

let langueActuelle = 'en'; // langue par d√©faut

	async function chargerLangues(url) {
	  const re = /^\[([^\]]+)\]\s*["']([^"']+)["']/;
	  const dictionnaire = {};
	  const response = await fetch(url);
	  const texte = await response.text();
	  texte.split('\n').forEach(ligne => {
		const match = ligne.match(re);
		if (match) {
		  dictionnaire[match[1]] = match[2];
		}
	  });

	  return dictionnaire;
	}
	
	

function appliquerTextes(labels, langue) {
  for (const cle in labels) {
	const baseId = cle.endsWith(`_${langue}`) 
  ? cle.slice(0, -(`_${langue}`.length)) 
  : cle;
    const element = document.getElementById(baseId);
    if (element) {
      element.textContent = labels[cle];
    }
  }
}

function switchLangue() {
  langueActuelle = langueActuelle === 'fr' ? 'en' : 'fr';
  localStorage.setItem('lang', langueActuelle);
  chargerLangues('langues.txt').then(labels => {
    appliquerTextes(labels, langueActuelle);
  });
}

// Au chargement, appliquer la langue pr√©f√©r√©e ou par d√©faut
window.addEventListener('DOMContentLoaded', () => {
  chargerLangues('langues.txt').then(labels => {
      appliquerTextes(labels, langueActuelle);
    });
});
</script>
  
  
</body>
</html>
